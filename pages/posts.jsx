import Head from "next/head";
import { useEffect, useState } from "react";
// import Link from "next/link";
// import { useSelector } from "react-redux";
import PostCard from "../components/postCard";
// import { selectPostIds, selectAllPosts } from "../features/posts/postsSlice";
import { useGetPostsQuery } from "../features/posts/postsSlice";

export default function Home() {
  const [postData, setPostData] = useState(null);
  const {
    isSuccess,
    error,
    isLoading,
    isError,
    data: posts,
  } = useGetPostsQuery();

  useEffect(() => {
    setPostData(posts);
  }, [posts]);

  // console.log("posts", postData);

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className="text-3xl">
        <section>
          {/* {postData &&
            postData.map((post) => <PostCard key={post.id} post={post} />)} */}

          {!isLoading &&
            postData?.ids.map((postId) => (
              <PostCard key={postId} post={postData.entities[postId]} />
            ))}
        </section>
      </main>

      <footer></footer>
    </div>
  );
}
